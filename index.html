<html>

<head>

    <title> SMART GROWTH LIVABILITY CALCULATOR </title>

    <!-- Bootstrap CSS -->
    <link 
        rel="stylesheet" 
        href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous"
    />

    <!-- Bootstrap-select CSS -->
    <link 
        rel="stylesheet" 
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css"
    />

    <!-- Font Awesome CSS -->
    <link 
        rel="stylesheet"
        href="https://use.fontawesome.com/releases/v5.0.4/css/all.css" 
    />

    <!-- Leaflet CSS -->
    <link 
        rel="stylesheet" 
        href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
        integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
        crossorigin="" 
    />
   
    <link 
        rel="stylesheet" 
        href="https://unpkg.com/leaflet-draw@0.4.9/dist/leaflet.draw.css" 
    />

    <!-- Project CSS -->
    <link 
        rel="stylesheet" 
        href="dist/style.css"
    />

</head>

<body>

    <div id="main-container" class="container-fluid d-flex flex-column h-100">

        <!-- Title and navigation bar -->
        <! -- 
        NOTE: adding fixed-top seems to fix navbar cutoff issue, BUT 
        it draws over map/sidebar... 
        fixed (?) by adding fixed-top and adding padding-top to body (see above
        -->
        <nav class="navbar navbar-dark navbar-expand-lg bg-dark fixed-top navbar-default row">
            <a class="navbar-brand" href="#"> Smart Growth Livability Calculator </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-toggle="modal" data-target="#modal-description"> 
                            Project Description
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-toggle="modal" data-target="#modal-directions"> 
                            Directions
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-toggle="modal" data-target="#modal-about-us"> 
                            About Us
                        </a>
                    </li>
                </ul>
            </div>
        </nav>


        <div class="row d-flex h-100">

            <!-- Map -->
            <div id="map" class="col d-flex justify-content-center"> </div>

            <!-- Sidebar -->
            <div id="sidebar" class="col-1 d-flex flex-column align-items-center">

                <div class="section">

                    <!--<span class="section-title"> Customize Map </span>-->

                    <h7 class="item-label"> Select Attribute: </h7>
                        <span id="select-property" class="dropdown">
                            <button type="button" id="dropdownMenuButton" class="btn btn-xs dropdown-toggle"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> 
                                    <span id="btn-label"> Vehicle Miles Traveled </span> <span class="caret"></span>
                            </button>

                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <li><a id="vmt" class="dropdown-item" href="#"> Vehicle Miles Traveled </a></li>
                                <li><a id="housing" class="dropdown-item" href="#"> Housing Affordability </a></li>
                                <li><a id="afford-transport" class="dropdown-item" href="#"> Transportation Affordability </a></li>
                                <li><a id="afford-house-transport" class="dropdown-item" href="#"> Housing + Transportation Affordability </a></li>
                                <li><a id="dwelling-density" class="dropdown-item" href="#"> Dwelling Density </a></li>
                                <li><a id="ghg" class="dropdown-item" href="#"> Carbon Emissions </a></li>
                                <li><a id="pedcol" class="dropdown-item" href="#"> Pedestrian Collisions </a></li>
                                <li><a id="pop-density" class="dropdown-item" href="#"> Population Density </a></li>
                                <li><a id="jobs-density" class="dropdown-item" href="#"> Jobs Density </a></li>
                                <li><a id="jobs-accessibility" class="dropdown-item" href="#"> Jobs Accessibility </a></li>
                                <li><a id="ped-environment" class="dropdown-item" href="#"> Walkability </a></li>
                                <li><a id="walkscore" class="dropdown-item" href="#"> WalkScore </a></li>
                                <li><a id="walkshare" class="dropdown-item" href="#"> Walking Percent </a></li>
                                <li><a id="cardio" class="dropdown-item" href="#"> Cardiovascular Disease </a></li>
                                <li><a id="obesity" class="dropdown-item" href="#"> Obesity </a></li>
                            </ul>
                        </span>
                    </span>
                </div>

                <hr>

                <!-- Container for statistics -->
                <div class="section">

                    <h7> <span id="stat-cbgs"> 0 </span> Block Groups Selected </h7>

                    <ul id="readouts" class="plain-list">

                        <li class="statistic" data-toggle="tooltip" data-placement="top">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    Vehicle Miles Traveled <br> (per household)
                                </span>
                                <span class="value">
                                    <span id="stat-vmt"> n/a </span>
                                </span>
                            </div>
                            <div id='bar-vmt' class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic" data-toggle="tooltip" data-placement="top" 
                                title="housing affordability reflects housing costs as a percent of income.">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    housing affordability
                                </span>
                                <span class="value">
                                    <span id="stat-housing"> n/a </span>
                                </span>
                            </div>
                            <div id='bar-housing' class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic" data-toggle="tooltip" data-placement="top" 
                                title="Transportation affordability reflects transportation costs as a percent of income.">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    Transportation affordability
                                </span>
                                <span class="value">
                                    <span id="stat-afford-transport"> n/a </span>
                                </span>
                            </div>
                            <div id='bar-afford-transport' class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic" data-toggle="tooltip" data-placement="top" 
                                title="Housing + transportation affordability reflects housing + transportation costs as a percent of income.">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    Housing + Transportation affordability
                                </span>
                                <span class="value">
                                    <span id="stat-afford-house-transport"> n/a </span>
                                </span>
                            </div>
                            <div id='bar-afford-house-transport' class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    dwelling density <br> (units per acre)
                                </span>
                                <span class="value">
                                    <span id="stat-dwelling-density"> n/a </span>
                                </span>
                            </div>
                            <div id='bar-dwelling-density' class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    carbon emissions <br> (lbs per household)
                                </span>
                                <span class="value">
                                    <span id="stat-ghg"> n/a </span>
                                </span>
                            </div>
                            <div id="bar-ghg" class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    pedestrian collisions <br> (per 100k walkers)
                                </span>
                                <span class="value">
                                    <span id="stat-pedcol"> n/a </span>
                                </span>
                            </div>
                            <div id="bar-pedcol" class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    population density <br> (persons per acre)
                                </span>
                                <span class="value">
                                    <span id="stat-pop-density"> n/a </span>
                                </span>
                            </div>
                            <div id="bar-pop-density" class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    jobs density <br> (jobs per acre)
                                </span>
                                <span class="value">
                                    <span id="stat-jobs-density"> n/a </span>
                                </span>
                            </div>
                            <div id="bar-jobs-density" class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic" data-toggle="tooltip" data-placement="top" 
                                    title="jobs accessibility reflects the number of jobs accessible within a 45 minute transit commute.">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    jobs accessibility
                                </span>
                                <span class="value">
                                    <span id="stat-jobs-accessibility"> n/a </span>
                                </span>
                            </div>
                            <div id="bar-jobs-accessibility" class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    walkability <br> (intersection density)
                                </span>
                                <span class="value">
                                    <span id="stat-ped-environment"> n/a </span>
                                </span>
                            </div>
                            <div id="bar-ped-environment" class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    walkscore
                                </span>
                                <span class="value">
                                    <span id="stat-walkscore"> n/a </span>
                                </span>
                            </div>
                            <div id="bar-walkscore" class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    walking percent
                                </span>
                                <span class="value">
                                    <span id="stat-walkshare"> n/a </span>
                                </span>
                            </div>
                            <div id="bar-walkshare" class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    cardiovascular disease <br>
                                    (percentile)
                                </span>
                                <span class="value">
                                    <span id="stat-cardio"> n/a </span>
                                </span>
                            </div>
                            <div id="bar-cardio" class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                        <li class="statistic">
                            <div class="d-flex justify-content-between align-items-end">
                                <span class="label">
                                    obesity <br>
                                    (percentage obese)
                                </span>
                                <span class="value">
                                    <span id="stat-obesity"> n/a </span>
                                </span>
                            </div>
                            <div id="bar-obesity" class="bar bar-full">
                                <div class="bar na"> </div>
                            </div>
                        </li>

                    </ul>

                </div>

                <!--
                <div class="row mt-auto justify-content-around align-items-end" style="font-size: 30px; color: #eee; background: #333; padding: 10px;">
                    <i class="fa fa-fw fa-map-marker-alt"></i>
                    <i class="fa fa-fw fa-map-marker-alt"></i>
                    <i class="fa fa-fw fa-map-marker-alt"></i>
                </div>
                -->

            </div>
        </div>
    </div>

    <!-- modals -->
    <div class="modal fade" id="modal-select-city" tabindex="-1" role="dialog" aria-hidden="false"
        data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-body" class="p-5">
                    <h4 class="text-center"> select a county: </h4>

                    <!-- <div class="d-flex justify-content-around flex-wrap mt-5"> -->
                    <div class="d-flex flex-column">
                        <button type="button" id="btn-sd-county" class="btn btn-squared btn-success btn-md">
                                <span id="btn-label" class="text-center"> san diego county </span>
                            </button>
                        <button type="button" id="btn-sm-county" class="btn btn-squared btn-success btn-md">
                                <span id="btn-label" class="text-center"> san mateo county </span>
                            </button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modal-description" tabindex="-1" role="dialog" aria-labelledby="modallabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title font-weight-bold"> project description </h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                </div>
                <div class="modal-body">
                    <p>
                        developed by dr. bruce appleyard (<a href="mailto:bappleyard@mail.sdsu.edu"
                            target="_top">bappleyard@mail.sdsu.edu</a>) and research
                        assistants chris allen and eduardo cordova, this new online
                        smart growth & livability calculator prototype is designed
                        to help practitioners and researchers meet a variety of
                        planning and design challenges related to corridors, station
                        areas, and complete streets, climate action planning and
                        providing affordable housing near transit in support of
                        active and sustainable travel. this smart growth & livability
                        calculator builds on work developing <a href="http://www.trb.org/main/blurbs/174953.aspx">the handbook for 
                                building livable transit corridors</a> and the
                        associated <a href="http://www.trb.org/main/blurbs/174953.aspx">
                                livability calculator</a>, sponsored by the national
                        academies of sciences' transportation research board.
                    </p>
                    <p>
                        in the future, this calculator will be designed to help plan the future of autonomous
                        vehicles, as outlines in this
                        <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3040783">
                            publication</a> on a new transportation/land
                        use performance measurement framework. for now, this prototype
                        covers san diego, ca, but we have the necessary data for
                        california and the entire us.
                    </p>
                    <p>
                        special thanks to geoff boeing, phd, for his advice and assistance on this calculator.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modal-about-us" tabindex="-1" role="dialog" aria-labelledby="modallabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title font-weight-bold"> about us </h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                </div>
                <div class="modal-body">
                    <h5> bruce appleyard, phd </h5>
                    <h5><a href="mailto:bappleyard@mail.sdsu.edu" target="_top"> bappleyard@mail.sdsu.edu</a></h5>
                    <p>
                        dr. appleyard is an associate professor in city & regional planning and public
                        administration at sdsu, with doctoral training in geo-spatial
                        analysis, behavioral economics, econometrics, and applied
                        transportation and land use policy analysis. dr. appleyard
                        is also an associate director in the human dynamics in
                        the mobile age (hdma) research center, and the assistant
                        director of the active transportation research center,
                        both based at sdsu. dr. appleyard has led several research
                        efforts examining the relationship between public transport,
                        land use, socio-economics, and a variety of outcomes related
                        to public health, sustainability, economic vitality, and
                        equity.
                    </p>
                    <p>
                        dr. appleyard was the co-pi for the development of <a href="http://www.trb.org/main/blurbs/174953.aspx">the handbook for 
                                building livable transit corridors</a> and the
                        associated <a href="http://www.trb.org/main/blurbs/174953.aspx">
                                livability calculator</a>, sponsored by the national
                        academies of sciences&#8217 transit cooperative research
                        project (tcrp). this required extensive geo-spatial and
                        econometric, mixed method analysis of all transit stations
                        and corridors throughout the us. dr. appleyard has also
                        been the project lead for the development of the sustainable
                        transportation calculator for the smart mobility framework
                        implementation project for the state of california
                    </p>

                    <h5> chris allen </h5>
                    <p>
                        chris allen is a phd candidate in the department of geography at san diego state
                        university, where he focuses on using geospatial techniques
                        and new data sources to examine well-being in urban areas.
                        prior to entering the phd program, chris worked as a software
                        verification engineer in the avionics industry and completed
                        an ma in urban history at san diego state. as a research
                        assistant at san diego state, he has worked primarily on
                        projects to collect and analyze social media data to study
                        topics ranging from disease outbreak to disaster management.
                        in this role, chris&#8217s duties have included database
                        administration, web dashboard creation (both server-side
                        and client-side programming), and geospatial analysis.
                    </p>

                    <h5> eduardo cordova </h5>
                    <p>
                        eduardo cordova graduated with distinction in his major from san diego state university
                        with a degree in geography with an emphasis in geographic
                        information systems (gis) in december of 2016. he has worked
                        on a variety of projects which include the excel livability
                        calculator, typology of transit corridor livability, carbon
                        emissions study, and crime stop studies. his contributions
                        range from map creation, python application development,
                        and data interpretation and management. his primary skill-set
                        include python programming, arcgis, and arc online.
                    </p>

                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modal-directions" tabindex="-1" role="dialog" aria-labelledby="modallabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title font-weight-bold"> directions </h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                </div>
                <div class="modal-body">
                    <h5> selecting layers </h5>
                    <p>
                        the smart growth livability calculator allows users to turn overlays on and off
                        by using the layer selection control, which is located
                        in the top-right corner of the map:

                        <div class="d-flex justify-content-center">
                            <img src="img/layer-selection-1.png" style="margin: 10px; height: 240px;">
                        </div>

                        hovering over the layer selection control will display the layers that are loaded
                        into the calculator. show or hide layers by selecting or
                        deselecting the checkboxes next to each layer label:

                        <div class="d-flex justify-content-center">
                            <img src="img/layer-selection-2.png" style="margin: 10px; height: 240px;">
                        </div>
                    </p>

                    <h5> selecting geographic units </h5>
                    <p>
                        the calculator gives users the option to dynamically select geographic units to
                        calculate smart growth scores for these sub-regions. this
                        is accomplished by using the drawing controls to the left
                        of map display, and users can select geographic units by
                        drawing point or line features. currently, these tools
                        select all units within a half-mile buffer of the drawn
                        feature, which was chosen to account for catchment areas
                        that exist around point or linear features:

                        <div class="d-flex flex-wrap justify-content-center">
                            <img src="img/area-selection-1.png" style="margin: 20px; height: 240px;">
                            <img src="img/area-selection-2.png" style="margin: 20px; height: 240px;">
                        </div>

                        after one or more features are drawn on the map, the statistic readouts will be
                        populated to display the aggregate smart growth scores
                        for the selected geographic units:

                        <div class="d-flex flex-wrap justify-content-center">
                            <img src="img/area-selection-readout.png" style="margin: 20px; height: 240px;">
                        </div>

                    </p>

                    <h5> deselecting geographic units </h5>
                    <p>
                        to remove any user selections, click the delete button (indicated by the trash
                        can icon) and choose "clear all":

                        <div class="d-flex justify-content-center">
                            <img src="img/area-selection-delete.png" style="margin: 10px; height: 240px;">
                        </div>
                    </p>

                </div>
            </div>
        </div>
    </div>

    <!-- jquery first, then popper.js, then bootstrap js -->
    <!-- not using slim version since no animate functionality -->
    <!--<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha384-kj3o2dktikvyik3uenzmm7kckrr/re9/qpg6aazgjwfdmvna/gpgff93hxpg5kkn"
crossorigin="anonymous"></script>-->

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity=""
          crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity=""
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity=""
        crossorigin="anonymous"></script>

    <script type="text/javascript" src="dist/bundle.js" charset="utf-8"></script>

    <script>
        $(window).ready(function() {
            $("#modal-select-city").modal('show');
            $('[data-toggle="tooltip"]').tooltip()
        });
    </script>
</body>

</html>
